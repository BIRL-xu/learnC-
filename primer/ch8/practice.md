### IO类型：
* iostream定义了读写流的基本类型
* fstream定义了读写命名文件的类型
* sstream定义了读写内存string对象的类型
* IO对象无拷贝和赋值，所以进行IO操作的函数通常以引用方式传递和返回流对象
* 读写一个IO对象会改变其状态，因此传递和返回的引用不能是const的
* 由于流可能处于错误状态，因此代码通常应该在使用一个流之前检查它是否处于良好状态:`while(cin >> word)`
### IO流错误状态strm::iostate：
* 系统级错误，`badbit`被置位，此时流不能再使用
* 可恢复错误，如读取类型与期望类型不一致，`failbit`被置位，流还可以继续使用
* 到达文件结束位置，`eofbit`和`failbit`都被置位，`goodbit`的值为０,表示流未发生错误
* 如果`badbit`、`eofbit`和`failbit`任一个被置位，检测流状态的条件会失败
#### Q8.1 & Q8.2:编写函数，接受一个istream&函数，返回值类型也是istream&。次函数须从给定流中读取数据，直至遇到文件结束标识时停止。它将读取的数据打印到标准输出上。完成这些操作后，在返回流之前，对流进行复位，使其处于有效状态。
#### A:　见8-1.cpp。
#### Q8.3: 什么情况下，下面的while循环会终止？
````c++
while(cin >> i) /*..*/
````
#### A:读到文件结束符时；i为非string对象时；系统出现错误时.
### 刷新输出缓冲区的原因：
* 程序正常结束，main函数的return操作会刷新输出缓冲区；
* 缓冲区满时；
* 使用换行符endl显示刷新缓冲区;
* 在每个输出操作之后，使用操纵符unitbuf设置流的内部状态来情况缓冲区。默认情况下，对cerr是设置unitbuf的，因此写到cerr的内容都是立即刷新的；
````c++
cout << unitbuf; // 所有输出操作后都会立即刷新缓冲区
cout << nounitbuf; // 回到正常的缓冲方式。
````
* 调用flush()函数，不输出任何额外的字符
* ends()向缓冲区插入一个空字符，然后刷新缓冲区；
* 如果程序异常崩溃，输出缓冲区是不会被刷新的
#### Q8.4: 编写函数，以读模式打开一个文件，将其内容读到一个string的vector中，将每一行作为一个独立的元素存于vector中。
#### A:使用getline函数读取一行，见8-4.cpp。
#### Q8.5:重写上面的程序，将每个单词作为一个独立的元素进行存储。
#### A: 见8-5.cpp。
#### Q8.6:重写7.1.1节的书店程序（第229）页，从一个文件中读取交易纪录。将文件名作为参数传递给main。
#### A:　见8-6.cpp。
### 文件模式：
* `in`: 以读方式打开
* `out`: 以写方式打开
* `app`: 每次写操作前均定位到文件末尾
* `ate`: 打开文件后立即定位到文件末尾
* `trunc`: 截断文件
* `binary`: 以二进制方式进行IO
### 以out模式打开文件会丢弃文件内已有数据，同时指定app模式可组织该行为
#### Q8.7: 修改上一节的书店程序，将结果保存到一个文件中。将输出文件名作为第二个参数传递给main函数。
#### A:见8-7.cpp。
#### Q8.8: 修改上一题的程序，将结果追加到给定的文件末尾。对同一个输出文件，运行程序至少两次，检验数据是否得以保留。
#### A:见8-7.cpp。不会覆盖已有内容。
#### Q8.9: 使用你为8.1.2节(第281页)第一个练习所编写的函数打印一个istringstream对象的内容。
#### A: 见8-9.cpp。
#### Q8.10: 编写程序，将来自一个文件中的行保存在一个vector<string>中。然后使用一个istringstream从vector读取数据元素，每次读取一个单词。
#### A: 见8-10.cpp。
#### Q8.11: 本节的程序在外层while循环中定义了istringstream对象。如果record对象定义在循环之外，你需要对程序进行怎样的修改？重写程序，将record的定义转移到while循环之外，验证你设想的修改方法是否正确。
#### A:使用str(string&)函数给record赋值，但是每次进行该操作前都必须情况string流。见8-11.cpp。
### 可以将多个想要输出的内容写入`ostringstream`中，然后一起打印：
````c++
ostringstream os;
os << "Hello" << "," << 1 << "pi: " << 3.14;
// 打印
cout << os.str() << endl;
````